<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Professional To-Do App with Drag & Drop + Restore + View & Manage All</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #5959a8, #455061);
    min-height: 100vh;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 40px;
  }
  .todo-container {
    background: rgba(255,255,255,0.2);
    backdrop-filter: blur(12px);
    padding: 70px;
    border-radius: 14px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    width: 100%;
    max-width: 700px;
    animation: fadeIn 0.6s ease-in-out;
    border: 1px solid rgba(255,255,255,0.3);
  }
  @keyframes fadeIn { from { opacity:0; 
  transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }
  h1 { text-align:center; margin-bottom:20px; color:white; text-shadow:1px 1px 2px #000; }
  .add-btn { display:block; width:100%; padding:12px; background: linear-gradient(120deg, #9132f7, #2575fc); color:white; font-size:1.1em; border:none; border-radius:8px; cursor:pointer; transition:0.3s; margin-bottom:12px; }
  .add-btn:hover { background: linear-gradient(135deg, #2575fc, #490197); transform: scale(1.03); }
  ul { list-style:none; padding:0; margin:0; }
  li {
    background: rgba(165, 129, 129, 0.85);
    margin: 12px 0; padding: 15px;
    border-radius: 10px; display: flex; flex-direction: column; gap:8px;
    border-left:5px solid #68d0f5; transition:transform 0.2s ease, box-shadow 0.2s ease; cursor:grab;
  }
  li.dragging { opacity:0.5; transform: scale(1.03); }
  li:hover { transform:translateY(-3px); box-shadow:0 4px 12px rgba(0,0,0,0.2); }
  .task-row { display:flex; justify-content:space-between; align-items:center; }
  .task-row span { font-size:1.1em; flex:1; }
  .completed span { text-decoration:line-through; color:gray; }
  .actions button { margin-left:5px; font-size:0.9em; padding:6px 10px; border:none; border-radius:6px; cursor:pointer; transition:0.3s; }
  .actions button:hover{ opacity:0.8; }
  .actions .complete{ background:#28a745; color:white; }
  .actions .edit{ background:#ffc107; color:black; }
  .actions .delete{ background:#dc3545; color:white; }
  small{ font-size:0.75em; color:#fff; opacity:0.8; }
  .deleted-container { margin-top:20px; background: linear-gradient(135deg, #6a9eff, #f8cc90); padding:15px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.3); }
  .deleted-container h3 { color:white; margin-bottom:12px; text-shadow:1px 1px 2px #000; }
  .deleted-container li { background: rgba(255, 255, 255, 0.15); border-left:5px solid #fff; margin:10px 0; padding:10px; border-radius:8px; color:#494242; display:flex; flex-direction:column; }
  .deleted-container li button { margin-top:6px; background: linear-gradient(135deg, #75f8a9, #0575e6); border:none; color:rgb(11, 10, 10); padding:6px 12px; border-radius:8px; cursor:pointer; font-weight:bold; transition: transform 0.2s, opacity 0.2s; }
  .deleted-container li button:hover { transform: scale(1.05); opacity:0.9; }

  .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.6); justify-content:center; align-items:center; z-index:1000; backdrop-filter: blur(4px); }
  .modal-content { background: linear-gradient(135deg, #6a11cb, #2575fc); color:white; padding:25px; border-radius:12px; max-width:400px; width:90%; display:flex; flex-direction:column; gap:15px; animation: fadeIn 0.4s ease-in-out; }
  .modal-content h3{ margin:0; }
  .modal-content input{ width:100%; padding:10px; margin:4px 0; border:none; border-radius:8px; font-size:1em; }
  .modal-actions{ display:flex; justify-content:flex-end; gap:10px; }
  .modal-actions button{ padding:8px 12px; border-radius:8px; border:none; font-weight:bold; cursor:pointer; transition:0.3s; }
  .modal-actions .save{ background:#63b5ec; color:#000; } .modal-actions .save:hover{ background:#00e6b8; }
  .modal-actions .cancel{ background:#011e4c; color:#fff; } .modal-actions .cancel:hover{ background:#01516e; }
  #deleteModal .modal-content{ background: linear-gradient(135deg, #205890, #1b93cf); text-align:center; }
  #deleteModal .modal-actions button{ width:100px; }

  /* View All Tasks Modal */
  #viewTasksModal .modal-content { background: linear-gradient(135deg, #056ba1, #01665d); color:white; max-height:80vh; overflow-y:auto; }
  #viewTasksModal ul li { padding:8px; border-radius:6px; margin:6px 0; background: rgba(255,255,255,0.15); display:flex; justify-content:space-between; align-items:center; flex-direction:column; }
  #viewTasksModal ul li button { margin-top:6px; padding:8px 20px; font-weight:bold; border:none; border-radius:6px; cursor:pointer; transition:0.2s; justify-content:space-between;}

  /* üì± RESPONSIVE DESIGN */

/* Tablets & smaller laptops */
@media (max-width: 1024px) {
  .todo-container {
    max-width: 90%;
    padding: 50px;
  }

  h1 {
    font-size: 1.8em;
  }

  .add-btn {
    font-size: 1em;
    padding: 10px;
  }

  li {
    font-size: 1em;
    padding: 12px;
  }
}

/* Tablets & large phones */
@media (max-width: 768px) {
  body {
    padding: 20px;
    align-items: center;
  }

  .todo-container {
    width: 100%;
    padding: 30px;
  }

  h1 {
    font-size: 1.6em;
  }

  .add-btn {
    font-size: 0.95em;
    padding: 10px;
  }

  .task-row span {
    font-size: 1em;
  }

  .actions button {
    font-size: 0.8em;
    padding: 5px 8px;
  }

  .deleted-container {
    padding: 10px;
  }

  .modal-content {
    padding: 20px;
    width: 95%;
  }
}

/* Mobile phones */
@media (max-width: 480px) {
  body {
    padding: 10px;
    align-items: stretch;
  }

  .todo-container {
    padding: 20px;
    border-radius: 10px;
  }

  h1 {
    font-size: 1.4em;
  }

  .add-btn {
    font-size: 0.9em;
    padding: 8px;
  }

  li {
    padding: 10px;
    font-size: 0.9em;
    flex-direction: column;
    align-items: flex-start;
  }

  .task-row {
    flex-direction: column;
    align-items: flex-start;
    gap: 6px;
  }

  .actions {
    width: 100%;
    display: flex;
    justify-content: flex-start;
    flex-wrap: wrap;
  }

  .actions button {
    margin: 4px 4px 0 0;
    font-size: 0.8em;
    padding: 6px 10px;
  }

  small {
    font-size: 0.7em;
  }

  .modal-content {
    padding: 15px;
    width: 95%;
  }

  .modal-actions {
    flex-direction: column;
    gap: 8px;
  }

  .modal-actions button {
    width: 100%;
    font-size: 0.9em;
    padding: 10px;
  }
}

</style>
</head>
<body>

<div class="todo-container">
  <h1>üìù My To-Do List</h1>
  <button class="add-btn" onclick="openModal()">+ Add Task</button>
  <button class="add-btn" onclick="openViewTasks()">üìã View & Manage All Tasks</button>
  <ul id="taskList"></ul>

  <!-- Deleted Tasks -->
  <div class="deleted-container">
    <h3>üóëÔ∏è Deleted Tasks</h3>
    <ul id="deletedList"></ul>
  </div>
</div>

<!-- Add/Edit Modal -->
<div class="modal" id="taskModal">
  <div class="modal-content">
    <h3 id="modalTitle">Add Task</h3>
    <input type="text" id="taskInput" placeholder="Enter a task">
    <input type="datetime-local" id="dateInput">
    <div class="modal-actions">
      <button class="save" onclick="saveTask()">Save</button>
      <button class="cancel" onclick="closeModal()">Cancel</button>
    </div>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal" id="deleteModal">
  <div class="modal-content">
    <h3>Are you sure you want to delete?</h3>
    <div class="modal-actions">
      <button class="save" id="confirmDeleteBtn">Yes</button>
      <button class="cancel" onclick="closeDeleteModal()">No</button>
    </div>
  </div>
</div>

<!-- View All Tasks Modal -->
<div class="modal" id="viewTasksModal">
  <div class="modal-content">
    <h3>All Tasks</h3>
    <ul id="viewTasksList"></ul>
    <div class="modal-actions">
      <button class="cancel" onclick="closeViewTasks()">Close</button>
    </div>
  </div>
</div>

<script>
const taskList = document.getElementById("taskList");
const deletedList = document.getElementById("deletedList");
const taskModal = document.getElementById("taskModal");
const deleteModal = document.getElementById("deleteModal");
const viewTasksModal = document.getElementById("viewTasksModal");
const viewTasksList = document.getElementById("viewTasksList");
const taskInput = document.getElementById("taskInput");
const dateInput = document.getElementById("dateInput");
const modalTitle = document.getElementById("modalTitle");

let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
let editTaskIndex = null;
let deleteTaskIndex = null;

function saveToStorage(){ localStorage.setItem("tasks", JSON.stringify(tasks)); }

function renderTasks(){
  taskList.innerHTML = "";
  deletedList.innerHTML = "";
  tasks.forEach((task,index)=>{
    const li = document.createElement("li");
    li.draggable = !task.hidden;
    li.innerHTML = `<div class="task-row"><span>${task.text}</span>
      <div class="actions">
        <button class="complete" onclick="toggleComplete(${index})">Done</button>
        <button class="edit" onclick="openEditModal(${index})">Edit</button>
        <button class="delete" onclick="openDeleteModal(${index})">Delete</button>
      </div></div>
      ${task.date?`<small data-date="${task.date}">üìÖ ${new Date(task.date).toLocaleString()}</small>`:""}`;
    if(task.completed) li.classList.add("completed");

    if(task.hidden){
      deletedList.appendChild(li);
      const restoreBtn = document.createElement("button");
      restoreBtn.textContent="Restore";
      restoreBtn.onclick=()=>{ task.hidden=false; saveToStorage(); renderTasks(); };
      li.appendChild(restoreBtn);
    } else {
      taskList.appendChild(li);
      addDragEvents(li);
    }
  });
}

function openModal(){ modalTitle.textContent="Add Task"; taskInput.value=""; dateInput.value=""; editTaskIndex=null; taskModal.style.display="flex"; }
function openEditModal(index){ modalTitle.textContent="Edit Task"; taskInput.value=tasks[index].text; dateInput.value=tasks[index].date||""; editTaskIndex=index; taskModal.style.display="flex"; }
function closeModal(){ taskModal.style.display="none"; }

function saveTask(){
  const taskText = taskInput.value.trim();
  const taskDate = dateInput.value;
  if(!taskText){ alert("Please enter a task!"); return; }
  if(editTaskIndex!==null){
    tasks[editTaskIndex].text=taskText; tasks[editTaskIndex].date=taskDate;
  } else tasks.push({text:taskText, date:taskDate, completed:false, hidden:false});
  saveToStorage();
  renderTasks();
  closeModal();
}

function toggleComplete(index){ tasks[index].completed=!tasks[index].completed; saveToStorage(); renderTasks(); }
function openDeleteModal(index){ deleteTaskIndex=index; deleteModal.style.display="flex"; }
function closeDeleteModal(){ deleteModal.style.display="none"; }
document.getElementById("confirmDeleteBtn").onclick=function(){
  if(deleteTaskIndex!==null){ tasks[deleteTaskIndex].hidden=true; saveToStorage(); renderTasks(); deleteTaskIndex=null; }
  closeDeleteModal();
}

/* Drag & Drop */
function addDragEvents(item){
  item.addEventListener('dragstart',()=>{ item.classList.add('dragging'); });
  item.addEventListener('dragend',()=>{ item.classList.remove('dragging'); });
}
taskList.addEventListener('dragover', e=>{
  e.preventDefault();
  const afterElement=getDragAfterElement(taskList, e.clientY);
  const dragging=document.querySelector('.dragging');
  if(afterElement==null) taskList.appendChild(dragging);
  else taskList.insertBefore(dragging, afterElement);
});
function getDragAfterElement(container,y){
  const draggableElements=[...container.querySelectorAll('li:not(.dragging)')];
  return draggableElements.reduce((closest,child)=>{
    const box = child.getBoundingClientRect();
    const offset = y - box.top - box.height/2;
    if(offset<0 && offset>closest.offset){ return {offset:offset, element:child}; }
    else return closest;
  }, {offset:Number.NEGATIVE_INFINITY}).element;
}

/* View All Tasks Interactive */
function openViewTasks(){
  viewTasksList.innerHTML="";
  tasks.forEach((task,index)=>{
    const li=document.createElement("li");

    const textSpan = document.createElement("span");
    textSpan.textContent = task.text + (task.date ? " | üìÖ " + new Date(task.date).toLocaleString() : "");
    if(task.completed) textSpan.style.textDecoration="line-through";
    if(task.hidden) li.style.opacity=0.5;
    li.appendChild(textSpan);

    const btnDiv = document.createElement("div");
    btnDiv.style.marginTop="6px";

    if(task.hidden){
      const restoreBtn=document.createElement("button");
      restoreBtn.textContent="Restore";
      restoreBtn.onclick=()=>{ task.hidden=false; saveToStorage(); renderTasks(); openViewTasks(); };
      btnDiv.appendChild(restoreBtn);
    } else {
      const completeBtn=document.createElement("button");
      completeBtn.textContent= task.completed ? "Undo" : "Done";
      completeBtn.onclick=()=>{ toggleComplete(index); openViewTasks(); };
      btnDiv.appendChild(completeBtn);

      const editBtn=document.createElement("button");
      editBtn.textContent="Edit";
      editBtn.onclick=()=>{ openEditModal(index); closeViewTasks(); };
      btnDiv.appendChild(editBtn);

      const deleteBtn=document.createElement("button");
      deleteBtn.textContent="Delete";
      deleteBtn.onclick=()=>{ openDeleteModal(index); closeViewTasks(); };
      btnDiv.appendChild(deleteBtn);
    }

    li.appendChild(btnDiv);
    viewTasksList.appendChild(li);
  });
  viewTasksModal.style.display="flex";
}
function closeViewTasks(){ viewTasksModal.style.display="none"; }

// Initial render
renderTasks();
</script>
</body>
</html>

